<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Zarządzania Magazynem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="bg-gray-100 font-sans">
    <div class="flex h-screen">
        <!-- Panel Boczny (Nawigacja) -->
        <aside class="w-64 bg-white shadow-md flex flex-col">
            <div class="p-6 border-b">
                <h1 class="text-2xl font-bold text-blue-600">Storage Manager System</h1>
            </div>
            <nav id="main-nav" class="mt-8 flex flex-col flex-1 gap-5 ml-6">
                <a href="#" class="nav-link" data-page="deliveries">
                    <i class="fas fa-truck-loading fa-fw mr-3"></i>Deliveries
                </a>
                <a href="#" class="nav-link" data-page="stock-summary">
                    <i class="fas fa-boxes fa-fw mr-3"></i>Stock
                </a>
                <a href="#" class="nav-link" data-page="stock-exp-date">
                    <i class="fas fa-calendar-alt fa-fw mr-3"></i>Stock with Exp. Dates
                </a>
            </nav>
        </aside>

        <!-- Główna Treść (dynamicznie przełączana) -->
        <div class="flex-1 p-4 sm:p-8 overflow-y-auto">
            <!-- === STRONA: POWITALNA === -->
            <div id="welcome-page" class="page-container">
                <div class="bg-white p-8 rounded-xl shadow-lg max-w-4xl mx-auto mt-8">
                <!-- Nagłówek -->
                    <h1 class="text-4xl font-bold text-gray-800 mb-6 text-center">Welcome to the Storage Manager System Demo!</h1>
                    <!-- Sekcja: O aplikacji -->
                    <section class="mb-6">
                        <p class="text-gray-700 text-lg mb-4">
                            I created this webapp fully in <strong>two weeks</strong>, and for sure this is <strong>not my full potential</strong>.
                            I am still learning and eager to work on new projects that can be helpful for you.
                        </p>
                        <p class="text-gray-700 text-lg mb-4">
                            I was a <strong>Logistics Manager</strong> at a company providing fulfillment services mainly for e-commerce businesses.
                            I worked closely with developers and analysts and often noticed communication problems — they did not fully understand warehouse tasks,
                            so functionalities were not implemented correctly. With my knowledge and experience, I decided to learn coding to provide a full solution — and this is it.
                            I am good at numbers and analytics, and my strong Excel skills helped me during my coding studies.
                        </p>
                    </section>

                    <!-- Sekcja: Cel aplikacji -->
                    <section class="mb-6">
                        <p class="text-gray-700 text-lg mb-4">
                            Now, I want to <strong>provide services</strong> for anyone seeking a reliable partner to solve real problems.
                            This app is the beginning of what I want to create: the <strong>Storage Manager System</strong>, responsible for tracking stock to avoid situations
                            where products are unavailable or expired. Losing money is not enjoyable for sellers, so this app will help remind when to order products
                            and when promotions should be applied due to low expiration dates.
                        </p>
                        <p class="text-gray-700 text-lg mb-4">
                            There are many possibilities to expand this app, but I want to do it in cooperation with companies that need it, to fulfill their needs 100%.
                        </p>
                    </section>

                    <!-- Sekcja: Kontakt -->
                    <section class="mb-6">
                        <p class="text-gray-700 text-lg mb-4">
                            If you are interested, just <strong>contact me</strong>.
                        </p>
                        <p class="text-gray-700 text-lg mb-4">
                            Wish you the best,<br>
                            <strong>Szymon Turek</strong>
                        </p>
                    </section>

                    <!-- Sekcja: Informacje kontaktowe -->
                    <section class="bg-gray-50 p-4 rounded-lg">
                        <ul class="space-y-2 text-gray-700 text-sm">
                            <li class="flex items-center gap-2">
                                <i class="fas fa-phone-alt text-blue-600"></i>
                                <span>+48 537 757 451</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <i class="fas fa-envelope text-blue-600"></i>
                                <span>szymonturek.work@gmail.com</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <i class="fab fa-linkedin text-blue-600"></i>
                                <a href="https://www.linkedin.com/in/szymon-turek-343374181/?originalSubdomain=pl" target="_blank" class="underline text-blue-600">
                                    LinkedIn Profile
                                </a>
                            </li>
                        </ul>
                    </section>
                </div>
                </div>
            </div>
            <!-- === STRONA: DOSTAWY === -->
            <div id="deliveries-page" class="page-container hidden">
                <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <h1 class="text-3xl font-bold text-gray-800">Deliveries</h1>
                    <button id="show-create-order-modal-btn" class="mt-4 sm:mt-0 btn-primary flex items-center">
                        <i class="fas fa-plus mr-2"></i> New Inbound Order
                    </button>
                </header>
                <div class="bg-white p-4 rounded-lg shadow-md mb-6">
                    <div class="flex justify-between items-center mb-3">
                        <h2 class="text-lg font-semibold text-gray-700">Filters</h2>
                        <button id="reset-deliveries-filters-btn" class="btn-reset">
                            <i class="fas fa-times-circle mr-1"></i> Reset
                        </button>
                    </div>
                    <form id="deliveries-filters-form" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="deliveries-filter-warehouse-id" class="form-label">Warehouse ID</label>
                            <input type="number" id="deliveries-filter-warehouse-id" name="warehouse_id" class="form-input" placeholder="e.g. 1">
                        </div>
                        <div class="md:col-span-2">
                            <label class="form-label">Delivery Order Status</label>
                            <div id="status-filter-container" class="mt-2 flex flex-wrap gap-x-4 gap-y-2"></div>
                        </div>
                    </form>
                </div>
                <main id="orders-container" class="space-y-6"></main>
            </div>

            <!-- === STRONA: STANY MAGAZYNOWE === -->
            <div id="stock-summary-page" class="page-container hidden">
                <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <h1 class="text-3xl font-bold text-gray-800">Stock Summary</h1>
                    <div class="flex gap-2 mt-4 sm:mt-0">
                        <button id="update-inbound-qty-btn" class="btn-secondary flex items-center" title="Update quantity of products that are not in status 'created', 'canceled' or 'completed'.">
                            <i class="fas fa-sync-alt mr-2"></i> Update Inbound Qty
                        </button>
                        <button id="update-stock-btn" class="btn-primary flex items-center" title="Update qty of products, by calling external API for stock data and recalculate it.">
                            <i class="fas fa-cogs mr-2"></i> Update Stock
                        </button>
                    </div>
                </header>
                <div class="bg-white p-4 rounded-lg shadow-md mb-6">
                     <div class="flex justify-between items-center mb-3">
                        <h2 class="text-lg font-semibold text-gray-700">Filters</h2>
                        <button id="reset-stock-filters-btn" class="btn-reset">
                            <i class="fas fa-times-circle mr-1"></i> Reset
                        </button>
                    </div>
                    <form id="stock-filters-form" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                             <label for="stock-filter-warehouse-id" class="form-label">Warehouse ID</label>
                             <input type="number" id="stock-filter-warehouse-id" name="warehouse_id" class="form-input" placeholder="Filter by Warehouse ID">
                        </div>
                        <div>
                             <label for="stock-filter-sku" class="form-label">Product SKU</label>
                             <input type="text" id="stock-filter-sku" name="sku" class="form-input" placeholder="e.g. SKU-1">
                        </div>
                        <div>
                             <label for="stock-filter-status" class="form-label">Quantity Status</label>
                             <select id="stock-filter-status" name="status_of_total_qty" class="form-input">
                                 <option value="">All</option>
                                 <option value="GOOD">GOOD</option>
                                 <option value="MEDIUM">MEDIUM</option>
                                 <option value="CRITICAL">CRITICAL</option>
                                 <option value="TOO_LOW">TOO_LOW</option>
                                 <option value="EMPTY">EMPTY</option>
                             </select>
                        </div>
                    </form>
                </div>
                <main id="stock-summary-container" class="bg-white rounded-lg shadow-md overflow-hidden"></main>
            </div>

            <!-- === STRONA: STANY Z DATAMI WAŻNOŚCI === -->
            <div id="stock-exp-date-page" class="page-container hidden">
                <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <h1 class="text-3xl font-bold text-gray-800">Stock With Exp. Date</h1>
                    <div class="flex gap-2 mt-4 sm:mt-0">
                        <button id="update-stock-exp-date-btn" class="btn-primary flex items-center" title="Update qty of products, by calling external API for stock data and recalculate it.">
                            <i class="fas fa-cogs mr-2"></i> Update Stock with Exp. Date
                        </button>
                    </div>
                </header>
                <div class="bg-white p-4 rounded-lg shadow-md mb-6">
                     <div class="flex justify-between items-center mb-3">
                        <h2 class="text-lg font-semibold text-gray-700">Filters</h2>
                        <button id="reset-stock-exp-filters-btn" class="btn-reset">
                            <i class="fas fa-times-circle mr-1"></i> Reset
                        </button>
                    </div>
                    <form id="stock-exp-filters-form" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                             <label for="stock-exp-filter-warehouse-id" class="form-label">Warehouse ID</label>
                             <input type="number" id="stock-exp-filter-warehouse-id" name="warehouse_id" class="form-input" placeholder="Filter by Warehouse ID">
                        </div>
                        <div>
                             <label for="stock-exp-filter-sku" class="form-label">Product SKU</label>
                             <input type="text" id="stock-exp-filter-sku" name="sku" class="form-input" placeholder="np. SKU-1">
                        </div>
                        <div>
                             <label for="stock-exp-filter-exp-date" class="form-label">Exp. Date</label>
                             <input type="date" id="stock-exp-filter-exp-date" name="exp_date" class="form-input">
                        </div>
                    </form>
                </div>
                <main id="stock-exp-container" class="bg-white rounded-lg shadow-md overflow-hidden"></main>
            </div>

            <div id="loader" class="text-center py-10 hidden">
                <div class="spinner"></div>
                <p class="mt-2 text-gray-500">Loading data...</p>
            </div>
        </div>
    </div>

    <div id="create-order-modal" class="modal hidden">
        <div class="modal-content"><h3 class="text-xl font-semibold mb-4">Create New Order</h3><form id="create-order-form"><div class="mb-4">
    <label for="warehouse_id" class="form-label block font-medium text-gray-700">Warehouse ID</label>
    <input type="number" id="warehouse_id" name="warehouse_id" required class="form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
</div>
<div class="mb-4">
    <label for="supplier_id" class="form-label block font-medium text-gray-700">Supplier ID</label>
    <input type="number" id="supplier_id" name="supplier_id" required class="form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
</div><div class="modal-actions"><button type="button" data-action="close-modal" class="btn-secondary">Cancel</button><button type="submit" class="btn-primary ml-6">Create</button></div></form></div>
    </div>
    <div id="add-product-modal" class="modal hidden">
        <div class="modal-content"><h3 class="text-xl font-semibold mb-4">Add Product</h3><form id="add-product-form"><input type="hidden" name="order_id" id="add-product-order-id"><div class="mb-4"><label for="product_sku" class="form-label">Product SKU</label><input type="text" id="product_sku" name="product_sku" required class="form-input"></div><div class="mb-4"><label for="qty" class="form-label">QTY</label><input type="number" id="qty" name="qty" required min="1" class="form-input"></div><div class="modal-actions"><button type="button" data-action="close-modal" class="btn-secondary">Cancel</button><button type="submit" class="btn-primary">Add</button></div></form></div>
    </div>

    <!-- ✅ POPRAWIONE: Załaduj skrypty jako moduły ES6 -->
    <script type="module" src="/js/api.js"></script>
    <script type="module" src="/js/layout.js"></script>
    <script type="module" src="/js/main.js"></script>
</body>
</html>